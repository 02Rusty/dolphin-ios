Import('env')

files = [
	"dis_decode.cpp",
	"dis_groups.cpp",
	"resolve.cpp",
	"syntax.cpp",
	"PowerPCDisasm.cpp",
	]

def filterWarnings(flags):
	return ' '.join(
		flag
		for flag in flags.split()
		if not flag.startswith('-W')
		)
env_bochs = env.Clone(
	CCFLAGS = filterWarnings(env['CCFLAGS']),
	CXXFLAGS = filterWarnings(env['CXXFLAGS']),
	)
env_bochs.StaticLibrary("bdisasm", files)
