# -*- python -*-

Import('env')
import sys

name = "Plugin_VideoSoftware"

files = [
	'BPMemLoader.cpp',
	'Clipper.cpp',
	'CommandProcessor.cpp',
	'CPMemLoader.cpp',
	'DebugUtil.cpp',
	'EfbCopy.cpp',
	'EfbInterface.cpp',
	'GLUtil.cpp',
	'HwRasterizer.cpp',
	'main.cpp',
	'OpcodeDecoder.cpp',
	'PixelEngine.cpp',
	'Rasterizer.cpp',
	'RasterFont.cpp',
	'Renderer.cpp',
	'SetupUnit.cpp',
	'Statistics.cpp',
	'Tev.cpp',
	'TextureEncoder.cpp',
	'TextureSampler.cpp',
	'TransformUnit.cpp',
	'VertexFormatConverter.cpp',
	'VertexLoader.cpp',
	'VideoConfig.cpp',
	'XFMemLoader.cpp',
	]

libs = [
	'videocommon', 'GLEW', 'SOIL', 'common'
	]

gfxenv = env.Clone()

if sys.platform == 'darwin' and not gfxenv['HAVE_WX']:
	files += [ 'cocoaGL.m' ]

if sys.platform == 'win32':
	files += [ 'Win32.cpp' ]
	libs += [ env['base_dir'] + '/Externals/Cg/' ]	
	gfxenv['CPPPATH'] += libs
	
gfxenv.SharedLibrary(
	env['plugin_dir']+name,
	files,
	LIBS =  libs + gfxenv['LIBS']
	)
