# -*- python -*-

Import('env')
import os
import sys

files = [
	'BPMemLoader.cpp',
	'Clipper.cpp',
	'CommandProcessor.cpp',
	'CPMemLoader.cpp',
	'DebugUtil.cpp',
	'EfbCopy.cpp',
	'EfbInterface.cpp',
	'GLUtil.cpp',
	'HwRasterizer.cpp',
	'main.cpp',
	'OpcodeDecoder.cpp',
	'PixelEngine.cpp',
	'Rasterizer.cpp',
	'RasterFont.cpp',
	'Renderer.cpp',
	'SetupUnit.cpp',
	'Statistics.cpp',
	'Tev.cpp',
	'TextureEncoder.cpp',
	'TextureSampler.cpp',
	'TransformUnit.cpp',
	'VertexLoader.cpp',
	'VideoConfig.cpp',
	'XFMemLoader.cpp',
	]

if env['HAVE_WX']:
	files += [ 'VideoConfigDialog.cpp' ]

if sys.platform == 'win32':
	files += [ 'Win32.cpp' ]

#env['LIBS'] += ['videocommon']
#
#if env['HAVE_WX']:
#	env['LIBS'] += [ 'videouicommon' ]
# XXX partially converted to libvideocommon, but there are still conflicts
files += [
	'../../../Core/VideoCommon/Src/ImageWrite.cpp',
	'../../../Core/VideoCommon/Src/IndexGenerator.cpp',
	'../../../Core/VideoCommon/Src/OpenCL/OCLTextureDecoder.cpp',
	'../../../Core/VideoCommon/Src/TextureDecoder.cpp',
	'../../../Core/VideoCommon/Src/VertexLoader_Color.cpp',
	'../../../Core/VideoCommon/Src/VertexLoader_Normal.cpp',
	'../../../Core/VideoCommon/Src/VertexLoader_Position.cpp',
	'../../../Core/VideoCommon/Src/VertexLoader_TextCoord.cpp',
	'../../../Core/VideoCommon/Src/VertexManagerBase.cpp',
	]

env['libvideo'] = env.StaticLibrary(env['local_libs'] + 'video', files)
