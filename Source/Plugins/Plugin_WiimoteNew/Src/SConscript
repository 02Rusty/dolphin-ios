# -*- python -*-

Import('env')
import sys

name = "Plugin_WiimoteNew"
wiinewenv = env.Clone()

files = [
	'WiimoteEmu/WiimoteEmu.cpp',
	'WiimoteEmu/Attachment/Classic.cpp',
	'WiimoteEmu/Attachment/Attachment.cpp',
	'WiimoteEmu/Attachment/Nunchuk.cpp',
	'WiimoteEmu/Attachment/Drums.cpp',
	'WiimoteEmu/Attachment/Guitar.cpp',
	'WiimoteEmu/EmuSubroutines.cpp',
	'WiimoteEmu/Encryption.cpp',
	'WiimoteEmu/Speaker.cpp',
	'WiimoteNew.cpp'
	]

libs = [ 'inputcommon', 'common', 'SDL' ]

cxxflags = [ ]

if wiinewenv['HAVE_WX']:
	libs = [ 'inputuicommon' ] + libs
	files += [ 'WiimoteConfigDiag.cpp' ]

if wiinewenv['HAVE_WIIUSE']:
	cxxflags += [ '-DHAVE_WIIUSE' ]
	files += [ 'WiimoteReal/WiimoteReal.cpp' ]
	libs += [ 'wiiuse' ]

wiinewenv.Append(
	CXXFLAGS = cxxflags,
	LIBS = libs
	)

wiinewenv.SharedLibrary(env['plugin_dir']+name, files)
