Import('env')
import sys

files = ["BPStructs.cpp",
		 "DataReader.cpp",
         "Globals.cpp",
         "GLInit.cpp",
		 "main.cpp",
         "memcpy_amd.cpp",
		 "OpcodeDecoding.cpp",
#		 "OpcodeReaders.cpp",   # outdated
		 "PixelShader.cpp",
		 "PixelShaderManager.cpp",
         "rasterfont.cpp",
		 "Render.cpp",
#         "TextureDecoder.cpp",
		 "TextureMngr.cpp",
		 "VertexLoader.cpp",
		 "VertexLoader_Normal.cpp",
		 "VertexShader.cpp",
		 "VertexShaderManager.cpp",
         "XFB.cpp",
#		 "Linux/Conf.cpp",
#		 "Linux/Linux.cpp",
		 "GUI/ConfigDlg.cpp",
		 ]
if sys.platform == 'darwin':         
	gfxenv=env.Copy(CXXFLAGS = " -DMACOSX=1 `sdl-config --cflags` `wx-config --cppflags` -I/opt/local/include ", LINKFLAGS = " -framework OpenGL -framework Cg `sdl-config --libs` `wx-config --libs` -L/opt/local/lib ")
	gfxenv.SharedLibrary("../../../../Binary/mac/Plugins/zeroogl.so", files, LIBS=["videocommon", "common", "GLEW", "jpeg"])
else:
	gfxenv=env.Copy(CXXFLAGS = " `wx-config --cppflags` `pkg-config --cflags xxf86vm` ", LINKFLAGS = "`wx-config --libs` `pkg-config --libs xxf86vm` ")
	gfxenv.SharedLibrary("../../../../Binary/linux/Plugins/zeroogl.so", files, LIBS=["videocommon", "common", "cairo", "GL", "GLU", "GLEW", "CgGL", "Cg", "X11", "jpeg"])
